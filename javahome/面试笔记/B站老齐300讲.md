001:架构
架构基于场景，架构没有对错，只有是否合适

002：Mysql集群模式和应用场景
集群模式
读写分离
分库分表（分片）：范围法【服务器节点数据分配不均，可能前面的满，第二个占用一半，第三个是空的】、Hash法取模【扩展极大难度】
主流架构：数据分片+集群+读写分离三者的综合使用

003：数据的垂直分表
通过将重要的字段单独剥离出一张小表，让每一页能够容纳更多的行，进而缩小数据扫描的范围，达到提高执行效率的目的
剥离的场景：单表数据超千万，字段超过20个，含有Varchar,CLOB,BLOB等字段

004：多级缓存
1.web应用的客户端缓存（CND内容网络分发）
2.应用层的静态资源缓存（nginx静态资源缓存）
3.服务层的多级缓存（redis数据缓存）

005：外包
java中级18K~27K（24K）
java高级25K~35K（30K）

006：todo

007:水平分表主键严禁使用自增主键
分布式环境下
自增id，不可取
UUID，频繁的索引重排，不可取
雪花算法，41bit时间戳+10bit机器ID+12bit序列，可能出现时钟回拨的情况，通常不用考虑

008：布隆过滤器
缓存穿透攻击：用户恶意的在短时间内大量查询不存在的数据，导致大量请求被送达数据库进行查询，当请求数量超过数据库的负载上限时，系统就会出现高延迟甚至瘫痪
初始化一个长度为N的二进制数组，经过K次Hash运行进行长度N取模运，落点位置改为1,
布隆过滤器认为：判断一个编号是否存在，通过布隆过滤器的多个hash运算以后的位置都是1，才可能存在；有一个为0，就一定不存在。
都是1也可能是不存在的，优化方案：1.增加二进制的位数，使得hash之后的数据更加分散；2.增加Hash次数。代价就是CPU需要进行更多的计算
场景：如果放进布隆过滤器的编号被删除了怎么办？可能某一个二进制位被多个hash引用，因此布隆过滤器无法直接删除
解决方法1：定时异步重建布隆过滤器
解决方法2：计数Bloom Filter，每一个二进制位再多一个位进行计数操作
生产环境使用布隆过滤器：
1.应用启动初始化布隆过滤器
2.用户请求编号进行布隆过滤器判断
3.存在则读取redis,如果redis不存在，则读数据库再载入redis
4.布隆过滤器不存在编号，返回数据不存在信息

